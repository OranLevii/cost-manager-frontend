<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IDB Test</title>
</head>
<body>

  <!-- First, load the idb.js library -->
  <script src="idb.js"></script>

  <script>
    // Set up test settings with exchange rates URL
    localStorage.setItem(
      "cm_settings_v1",
      JSON.stringify({
        ratesUrl: "https://oranlevii.github.io/cost-manager-rates/rates.json"
      })
    );
  
    /**
     * Test function to verify IndexedDB operations
     * Opens the database, adds a test cost, and retrieves a yearly report
     */
    async function test() {
      const db = await window.idb.openCostsDB("costsdb", 1);
  
      // You can add more test data here if needed
      await db.addCost({
        sum: 100,
        currency: "USD",
        category: "Food",
        description: "Jan food",
      });
  
      const yearly = await window.idb.getYearlyReport(2026, "USD");
      console.log("YEARLY REPORT:", yearly);
    }
  
    // Run the test function
    test();
  </script>
  

</body>
</html>
